import{I as F,bq as we,br as Fe,A as x,aM as J,G as ue,B as _,e as g,D as B,bs as Ae,d as oe,f as Q,F as re,Z as xe,aJ as Le,aD as X,aN as ke,bt as Y,bu as Ie,aO as Be,r as w,aF as de,aS as R,aQ as z,w as A,C as S,E as t,P as V,bv as Se,bw as Ve,g as fe,W as P,aI as Z,bx as Ke,o as He,c as Re,aY as ce,aE as ve,by as Te,bz as Pe}from"#entry";import{f as Oe}from"./CKsIA6gm.js";function De(s){return F(()=>we(s)?!!Fe(s)?.closest("form"):!0)}function $e(){return{ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",SPACE_CODE:"Space"}}var Me=x({inheritAttrs:!1,__name:"VisuallyHiddenInputBubble",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(s){const a=s,{primitiveElement:l,currentElement:u}=J(),r=F(()=>a.checked??a.value);return ue(r,(n,d)=>{if(!u.value)return;const v=u.value,f=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(f,"value").set;if(b&&n!==d){const p=new Event("input",{bubbles:!0}),L=new Event("change",{bubbles:!0});b.call(v,n),v.dispatchEvent(p),v.dispatchEvent(L)}}),(n,d)=>(g(),_(Ae,B({ref_key:"primitiveElement",ref:l},{...a,...n.$attrs},{as:"input"}),null,16))}}),se=Me,Ne=x({inheritAttrs:!1,__name:"VisuallyHiddenInput",props:{name:{type:String,required:!0},value:{type:null,required:!0},checked:{type:Boolean,required:!1,default:void 0},required:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},feature:{type:String,required:!1,default:"fully-hidden"}},setup(s){const a=s,l=F(()=>typeof a.value=="object"&&Array.isArray(a.value)&&a.value.length===0&&a.required),u=F(()=>typeof a.value=="string"||typeof a.value=="number"||typeof a.value=="boolean"||a.value===null||a.value===void 0?[{name:a.name,value:a.value}]:typeof a.value=="object"&&Array.isArray(a.value)?a.value.flatMap((r,n)=>typeof r=="object"?Object.entries(r).map(([d,v])=>({name:`${a.name}[${n}][${d}]`,value:v})):{name:`${a.name}[${n}]`,value:r}):a.value!==null&&typeof a.value=="object"&&!Array.isArray(a.value)?Object.entries(a.value).map(([r,n])=>({name:`${a.name}[${r}]`,value:n})):[]);return(r,n)=>(g(),oe(re,null,[Q(" We render single input if it's required "),l.value?(g(),_(se,B({key:r.name},{...a,...r.$attrs},{name:r.name,value:r.value}),null,16,["name","value"])):(g(!0),oe(re,{key:1},xe(u.value,d=>(g(),_(se,B({key:d.name},{ref_for:!0},{...a,...r.$attrs},{name:d.name,value:d.value}),null,16,["name","value"]))),128))],2112))}}),Ge=Ne;function je(s,a,l){return s===void 0?!1:Array.isArray(s)?s.some(u=>T(u,a,l)):T(s,a,l)}function T(s,a,l){return s===void 0||a===void 0?!1:typeof s=="string"?s===a:typeof l=="function"?l(s,a):typeof l=="string"?s?.[l]===a?.[l]:Le(s,a)}const[ee,Ue]=X("ListboxRoot");var We=x({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(s,{expose:a,emit:l}){const u=s,r=l,{multiple:n,highlightOnHover:d,orientation:v,disabled:f,selectionBehavior:E,dir:b}=ke(u),{getItems:p}=Y({isProvider:!0}),{handleTypeaheadSearch:L}=Ie(),{primitiveElement:O,currentElement:m}=J(),q=$e(),D=Be(b),pe=De(m),$=w(),K=w(!1),M=w(!0),y=de(u,"modelValue",r,{defaultValue:u.defaultValue??(n.value?[]:void 0),passive:u.modelValue===void 0,deep:!0});function me(e){if(K.value=!0,u.multiple){const i=Array.isArray(y.value)?[...y.value]:[],o=i.findIndex(c=>T(c,e,u.by));u.selectionBehavior==="toggle"?(o===-1?i.push(e):i.splice(o,1),y.value=i):(y.value=[e],$.value=e)}else u.selectionBehavior==="toggle"&&T(y.value,e,u.by)?y.value=void 0:y.value=e;setTimeout(()=>{K.value=!1},1)}const h=w(null),N=w(null),k=w(!1),G=w(!1),te=z(),j=z(),ae=z();function U(){return p().map(e=>e.ref).filter(e=>e.dataset.disabled!=="")}function C(e,i=!0){if(!e)return;h.value=e,M.value&&h.value.focus(),i&&h.value.scrollIntoView({block:"nearest"});const o=p().find(c=>c.ref===e);r("highlight",o)}function ye(e){if(k.value)ae.trigger(e);else{const i=p().find(o=>T(o.value,e,u.by));i&&(h.value=i.ref,C(i.ref))}}function he(e){h.value&&h.value.isConnected&&(e.preventDefault(),e.stopPropagation(),G.value||h.value.click())}function be(e){if(M.value){if(K.value=!0,k.value)j.trigger(e);else{const i=e.altKey||e.ctrlKey||e.metaKey;if(i&&e.key==="a"&&n.value){const o=p(),c=o.map(I=>I.value);y.value=[...c],e.preventDefault(),C(o[o.length-1].ref)}else if(!i){const o=L(e.key,p());o&&C(o)}}setTimeout(()=>{K.value=!1},1)}}function ge(){G.value=!0}function _e(){R(()=>{G.value=!1})}function le(){R(()=>{const e=new KeyboardEvent("keydown",{key:"PageUp"});ie(e)})}function W(e){const i=h.value;i?.isConnected&&(N.value=i),h.value=null,r("leave",e)}function Ee(e){const i=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(i),r("entryFocus",i),!i.defaultPrevented)if(N.value)C(N.value);else{const o=U()?.[0];C(o)}}function ie(e){const i=Se(e,v.value,D.value);if(!i)return;let o=U();if(h.value){if(i==="last")o.reverse();else if(i==="prev"||i==="next"){i==="prev"&&o.reverse();const c=o.indexOf(h.value);o=o.slice(c+1)}Ce(e,o[0])}if(o.length){const c=!h.value&&i==="prev"?o.length-1:0;C(o[c])}if(k.value)return j.trigger(e)}function Ce(e,i){if(!(k.value||u.selectionBehavior!=="replace"||!n.value||!Array.isArray(y.value)||(e.altKey||e.ctrlKey||e.metaKey)&&!e.shiftKey)&&e.shiftKey){const c=p().filter(H=>H.ref.dataset.disabled!=="");let I=c.find(H=>H.ref===i)?.value;if(e.key===q.END?I=c[c.length-1].value:e.key===q.HOME&&(I=c[0].value),!I||!$.value)return;const qe=Oe(c.map(H=>H.value),$.value,I);y.value=qe}}async function ne(e){if(await R(),k.value)te.trigger(e);else{const i=U(),o=i.find(c=>c.dataset.state==="checked");o?C(o):i.length&&C(i[0])}}return ue(y,()=>{K.value||R(()=>{ne()})},{immediate:!0,deep:!0}),a({highlightedElement:h,highlightItem:ye,highlightFirstItem:le,highlightSelected:ne,getItems:p}),Ue({modelValue:y,onValueChange:me,multiple:n,orientation:v,dir:D,disabled:f,highlightOnHover:d,highlightedElement:h,isVirtual:k,virtualFocusHook:te,virtualKeydownHook:j,virtualHighlightHook:ae,by:u.by,firstValue:$,selectionBehavior:E,focusable:M,onLeave:W,onEnter:Ee,changeHighlight:C,onKeydownEnter:he,onKeydownNavigation:ie,onKeydownTypeAhead:be,onCompositionStart:ge,onCompositionEnd:_e,highlightFirstItem:le}),(e,i)=>(g(),_(t(V),{ref_key:"primitiveElement",ref:O,as:e.as,"as-child":e.asChild,dir:t(D),"data-disabled":t(f)?"":void 0,onPointerleave:W,onFocusout:i[0]||(i[0]=async o=>{const c=o.relatedTarget||o.target;await R(),h.value&&t(m)&&!t(m).contains(c)&&W(o)})},{default:A(()=>[S(e.$slots,"default",{modelValue:t(y)}),t(pe)&&e.name?(g(),_(t(Ge),{key:0,name:e.name,value:t(y),disabled:t(f),required:e.required},null,8,["name","value","disabled","required"])):Q("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),nt=We,ze=x({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const{CollectionSlot:a}=Y(),l=ee(),u=Ve(!1,10);return(r,n)=>(g(),_(t(a),null,{default:A(()=>[fe(t(V),{role:"listbox",as:r.as,"as-child":r.asChild,tabindex:t(l).focusable.value?t(l).highlightedElement.value?"-1":"0":void 0,"aria-orientation":t(l).orientation.value,"aria-multiselectable":!!t(l).multiple.value,"data-orientation":t(l).orientation.value,onMousedown:n[0]||(n[0]=Z(d=>u.value=!0,["left"])),onFocus:n[1]||(n[1]=d=>{t(u)||t(l).onEnter(d)}),onKeydown:[n[2]||(n[2]=P(d=>{t(l).orientation.value==="vertical"&&(d.key==="ArrowLeft"||d.key==="ArrowRight")||t(l).orientation.value==="horizontal"&&(d.key==="ArrowUp"||d.key==="ArrowDown")||(d.preventDefault(),t(l).focusable.value&&t(l).onKeydownNavigation(d))},["down","up","left","right","home","end"])),P(t(l).onKeydownEnter,["enter"]),t(l).onKeydownTypeAhead]},{default:A(()=>[S(r.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),ot=ze,Je=x({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(s,{emit:a}){const l=s,r=de(l,"modelValue",a,{defaultValue:"",passive:l.modelValue===void 0}),n=ee(),{primitiveElement:d,currentElement:v}=J(),f=F(()=>l.disabled||n.disabled.value||!1),E=w();return Ke(()=>E.value=n.highlightedElement.value?.id),He(()=>{n.focusable.value=!1,setTimeout(()=>{l.autoFocus&&v.value?.focus()},1)}),Re(()=>{n.focusable.value=!0}),(b,p)=>(g(),_(t(V),{ref_key:"primitiveElement",ref:d,as:b.as,"as-child":b.asChild,value:t(r),disabled:f.value?"":void 0,"data-disabled":f.value?"":void 0,"aria-disabled":f.value??void 0,"aria-activedescendant":E.value,type:"text",onKeydown:[P(Z(t(n).onKeydownNavigation,["prevent"]),["down","up","home","end"]),P(t(n).onKeydownEnter,["enter"])],onInput:p[0]||(p[0]=L=>{r.value=L.target.value,t(n).highlightFirstItem()}),onCompositionstart:t(n).onCompositionStart,onCompositionend:t(n).onCompositionEnd},{default:A(()=>[S(b.$slots,"default",{modelValue:t(r)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),rt=Je;const[st,Qe]=X("ListboxGroup");var Xe=x({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const a=s,l=ce(void 0,"reka-listbox-group");return Qe({id:l}),(u,r)=>(g(),_(t(V),B({role:"group"},a,{"aria-labelledby":t(l)}),{default:A(()=>[S(u.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),ut=Xe;const Ye="listbox.select",[Ze,et]=X("ListboxItem");var tt=x({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(s,{emit:a}){const l=s,u=a,r=ce(void 0,"reka-listbox-item"),{CollectionItem:n}=Y(),{forwardRef:d,currentElement:v}=ve(),f=ee(),E=F(()=>v.value===f.highlightedElement.value),b=F(()=>je(f.modelValue.value,l.value,f.by)),p=F(()=>f.disabled.value||l.disabled);async function L(m){u("select",m),!m?.defaultPrevented&&!p.value&&m&&(f.onValueChange(l.value),f.changeHighlight(v.value))}function O(m){const q={originalEvent:m,value:l.value};Pe(Ye,L,q)}return et({isSelected:b}),(m,q)=>(g(),_(t(n),{value:m.value},{default:A(()=>[Te([E.value,b.value],()=>fe(t(V),B({id:t(r)},m.$attrs,{ref:t(d),role:"option",tabindex:t(f).focusable.value?E.value?"0":"-1":-1,"aria-selected":b.value,as:m.as,"as-child":m.asChild,disabled:p.value?"":void 0,"data-disabled":p.value?"":void 0,"data-highlighted":E.value?"":void 0,"data-state":b.value?"checked":"unchecked",onClick:O,onKeydown:P(Z(O,["prevent"]),["space"]),onPointermove:q[0]||(q[0]=D=>{t(f).highlightedElement.value!==t(v)&&(t(f).highlightOnHover.value?t(f).changeHighlight(t(v),!1):t(f).focusable.value||t(f).changeHighlight(t(v),!1))})}),{default:A(()=>[S(m.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),q,1)]),_:3},8,["value"]))}}),dt=tt,at=x({__name:"ListboxItemIndicator",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(s){const a=s;ve();const l=Ze();return(u,r)=>t(l).isSelected.value?(g(),_(t(V),B({key:0,"aria-hidden":"true"},a),{default:A(()=>[S(u.$slots,"default")]),_:3},16)):Q("v-if",!0)}}),ft=at;export{rt as L,Ge as V,ot as a,ut as b,dt as c,ft as d,nt as e,ee as f,st as i,De as u};
